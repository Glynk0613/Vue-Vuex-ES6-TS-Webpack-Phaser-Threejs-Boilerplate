var PhaserGameObject=function(){function t(){this.game=null,this.global={pause:!1}}return t.prototype.init=function(t,e,s){var o,i=new Phaser.Game(s.width,s.height,Phaser.WEBGL,t,{preload:function(){i.load.enableParallel=!0,i.stage.backgroundColor="#2f2f2f",i.load.image("gametitle","src/assets/game/demo1/titles/100x100.jpg"),i.load.audio("intro-music",["src/assets/game/demo1/music/far-sight.ogg"]),i.load.audio("select",["src/assets/game/demo1/sound/Pickup_Coin.ogg"]),i.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"),window.WebFontConfig={active:function(){},google:{families:["Press Start 2P"]}},r.state=n.PRELOAD,new PHASER_PRELOADER({game:i,delayInSeconds:0,done:function(){i.physics.startSystem(Phaser.Physics.ARCADE),a.assignButtons(i),o=i.add.sprite(i.world.centerX-50,i.world.centerY,"gametitle"),i.physics.enable([o],Phaser.Physics.ARCADE),o.body.collideWorldBounds=!0,o.body.bounce.y=.5,o.body.gravity.y=200,r.state=n.READY}})},update:function(){a.isDebuggerEnabled()&&a.updateDebugger();r.state===n.PRELOAD&&__phaser.global.pause;r.state!==n.READY||__phaser.global.pause||a.read("A").active&&i.time.now>r.input.delay&&(r.input.delay=r.input.delayValue+i.time.now)}}),a=new IO_CONTROLS,n={BOOT:"BOOT",PRELOAD:"PRELOAD",READY:"READY"},r={state:n.BOOT,input:{delay:0,delayValue:100}};e.game=this,this.game=i},t.prototype.destroy=function(){this.game.destroy()},t}(),__phaser=new PhaserGameObject,IO_CONTROLS=function(){function t(){this.IO=null,this.game=null,this.buttonSensitivity={TAP:1,SHORT:50,LONG:150,SUPERLONG:300},this.properties={isReady:!1,allowDebugger:!0,buttonDelay:50,timingRefreshRate:1},this.directionalButtons=["UP","DOWN","LEFT","RIGHT"],this.actionButtons=["A","B","X","Y"],this.triggerButtons=["L1","L2","R1","R2","L3","R3"],this.systemButtons=["START","BACK"],this.buttonArray=this.directionalButtons.concat(this.actionButtons,this.triggerButtons,this.systemButtons),this.buttonMap={UP:{name:"UP",code:"ArrowUp"},DOWN:{name:"DOWN",code:"ArrowDown"},LEFT:{name:"LEFT",code:"ArrowLeft"},RIGHT:{name:"RIGHT",code:"ArrowRight"},A:{name:"A",code:"KeyA"},B:{name:"S",code:"KeyS"},X:{name:"D",code:"KeyD"},Y:{name:"F",code:"KeyF"},L1:{name:"Q",code:"KeyQ"},L2:{name:"W",code:"KeyW"},R1:{name:"E",code:"KeyE"},R2:{name:"R",code:"KeyR"},L3:{name:"O",code:"KeyO"},R3:{name:"P",code:"KeyP"},START:{name:"ENTER",code:"Enter"},BACK:{name:"BACKSPACE",code:"Backspace"}},this.disabledButtons={ALL:!1,DIRECTIONAL:!1,TRIGGER:!1,ACTION:!1,SYSTEM:!0},this.debugger={enabled:!1,text:{}}}return t.prototype.assignButtons=function(t){var e=this;this.game=t;var s={font:"12px Courier New",fill:"#fff",align:"left"};this.buttonArray.forEach(function(o,i){e.debugger.text[o]=null,e.debugger.text[o]=t.add.text(10,10+15*i,"",s),e.disabledButtons[o]=!1});for(var o={buttons:{},sensitivityPress:{},sensitivityBuffer:{},timedPress:{},timedBuffer:{},timedTrigger:{},state:{}},i=function(s){o.buttons[s]=t.input.keyboard.addKey(Phaser.Keyboard[a.buttonMap[s].name]),o.sensitivityPress[s]=null,o.sensitivityBuffer[s]=0,o.state[s]=function(){return e.getBtnPressType(e.IO.sensitivityBuffer[s])}},a=this,n=0,r=this.buttonArray;n<r.length;n++){i(r[n])}for(var d=function(t){o.buttons[t].onDown.add(function(s){var i,a;clearInterval(o.sensitivityPress[t]);var n=["DIRECTIONAL","ACTION","TRIGGER","SYSTEM"];Object.keys(e.buttonMap).forEach(function(t,o){if(e.buttonMap[t].code===s.event.code)for(var r=0,d=n;r<d.length;r++){var u=d[r];e[u.toLowerCase()+"Buttons"].indexOf(t)+1&&(i=u,a=t)}});var r=!1;e.disabledButtons.ALL&&(r=!0);for(var d=0,u=n;d<u.length;d++){var l=u[d];e.disabledButtons[l]&&i===l&&(r=!0)}Object.keys(e.buttonMap).forEach(function(t,s){e.disabledButtons[t]&&a===t&&(r=!0)}),r||(o.sensitivityPress[t]=setInterval(function(){o.sensitivityBuffer[t]+=1},e.properties.timingRefreshRate))},u)},u=this,l=0,p=this.buttonArray;l<p.length;l++){d(p[l])}return t.input.keyboard.onUpCallback=function(t){for(var s=0,i=e.buttonArray;s<i.length;s++){var a=i[s];t.code===e.buttonMap[a].code&&(clearInterval(o.sensitivityPress[a]),o.sensitivityBuffer[a]=0)}"Backquote"===t.code&&e.properties.allowDebugger&&(e.setDebugger(!e.debugger.enabled),e.updateDebugger())},this.properties.isReady=!0,this.IO=o,o},t.prototype.mapKeys=function(t){var e=this;this.properties.isReady=!1,this.destroyAll(),setTimeout(function(){e.buttonMap=t,e.properties.isReady=!0,e.assignButtons(e.game)},1)},t.prototype.isReady=function(){return this.properties.isReady},t.prototype.isDebuggerEnabled=function(){return this.debugger.enabled},t.prototype.setDebugger=function(t){void 0===t&&(t=!0),this.debugger.enabled=t},t.prototype.updateDebugger=function(){if(this.properties.isReady)for(var t=0,e=this.buttonArray;t<e.length;t++){var s=e[t];this.debugger.text[s].setText(this.debugger.enabled?this.debuggerString(s):"").bringToTop()}},t.prototype.disableAllInput=function(){this.disabledButtons.ALL=!0},t.prototype.enableAllInput=function(){this.disabledButtons.ALL=!1},t.prototype.disableAllDirectionalButtons=function(){this.disabledButtons.DIRECTIONAL=!0},t.prototype.enableAllDirectionalButtons=function(){this.disabledButtons.DIRECTIONAL=!1},t.prototype.disableAllTriggerButtons=function(){this.disabledButtons.TRIGGER=!0},t.prototype.enableAllTriggerButtons=function(){this.disabledButtons.TRIGGER=!1},t.prototype.disableAllActionButtons=function(){this.disabledButtons.ACTION=!0},t.prototype.enableAllActionButtons=function(){this.disabledButtons.ACTION=!1},t.prototype.disableAllSystemButtons=function(){this.disabledButtons.SYSTEM=!0},t.prototype.enableAllSystemButtons=function(){this.disabledButtons.SYSTEM=!1},t.prototype.setDisableKeyProperty=function(t,e){void 0===e&&(e=!0),this.properties.isReady&&(this.disabledButtons[t.toUpperCase()]=e)},t.prototype.getKeyDisabledValue=function(t){return this.properties.isReady?this.disabledButtons[t.toUpperCase()]:null},t.prototype.clearAllControlIntervals=function(){if(this.properties.isReady)for(var t=0,e=this.buttonArray;t<e.length;t++){var s=e[t];clearInterval(this.IO.timedPress[s]),clearInterval(this.IO.sensitivityPress[s])}},t.prototype.read=function(t){if(this.properties.isReady){return{}[t]={active:this.IO.state[t.toUpperCase()]().val>0,duration:this.IO.state[t.toUpperCase()]().val,state:this.IO.state[t.toUpperCase()]().state,type:this.IO.state[t.toUpperCase()]().type,disabled:this.disabledButtons[t.toUpperCase()]}}return{}},t.prototype.readMulti=function(t,e){if(void 0===e&&(e="OBJECT"),this.properties.isReady){if("OBJECT"===e){for(var s={},o=0,i=t;o<i.length;o++){s[r=i[o]]={active:this.IO.state[r.toUpperCase()]().val>0,duration:this.IO.state[r.toUpperCase()]().val,state:this.IO.state[r.toUpperCase()]().state,type:this.IO.state[r.toUpperCase()]().type,disabled:this.disabledButtons[r.toUpperCase()]}}return s}if("ARRAY"===e){s=[];for(var a=0,n=t;a<n.length;a++){var r=n[a];s.push({key:r,active:this.IO.state[r.toUpperCase()]().val>0,duration:this.IO.state[r.toUpperCase()]().val,state:this.IO.state[r.toUpperCase()]().state,type:this.IO.state[r.toUpperCase()]().type,disabled:this.disabledButtons[r.toUpperCase()]})}return s}}},t.prototype.debuggerString=function(t){return t.toUpperCase()+" ("+this.buttonMap[t.toUpperCase()].name+"/"+this.buttonMap[t.toUpperCase()].code+") | duration: "+this.IO.state[t.toUpperCase()]().val+" | state: "+this.IO.state[t.toUpperCase()]().state+" | type: "+this.IO.state[t.toUpperCase()]().type+" | disabled: "+this.disabledButtons[t.toUpperCase()]},t.prototype.getBtnPressType=function(t){var e=this,s="NONE",o=0,i=0;return Object.keys(this.buttonSensitivity).forEach(function(a){i++,t>e.buttonSensitivity[a]&&(s=a,o=i)}),{val:t,type:s,state:o}},t.prototype.destroyAll=function(){var t=this;this.clearAllControlIntervals(),Object.keys(this.debugger.text).forEach(function(e){t.debugger.text[e].destroy()})},t}(),IO_AUDIO=function(){return function(){}}(),PHASER_PRELOADER=function(){function t(t){this.game=t.game,this.init(t.delayInSeconds,t.done)}return t.prototype.init=function(t,e){var s,o,i=this;this.game.load.onLoadStart.add(function(){(s=i.game.add.text(i.game.world.centerX,i.game.world.centerY/2,"",{font:"18px Impact",fill:"#fff",align:"center"})).anchor.set(.5),(o=i.game.add.text(i.game.world.centerX,i.game.world.centerY,"",{font:"32px Impact",fill:"#fff",align:"center"})).anchor.set(.5)},this),this.game.load.onFileComplete.add(function(t,e,i,a,n){s.setText("Please wait..."),o.setText(t+"%")},this),this.game.load.onLoadComplete.add(function(){s.setText("File loaded!"),o.setText(""),i.game.time.events.add(Phaser.Timer.SECOND*t,function(){s.destroy(),o.destroy(),e()},i).autoDestroy=!0},this)},t}();